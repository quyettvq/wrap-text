function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var global,factory;global=this,factory=function(e){function n(e,n){var r=n.t,t=n.o,o=n.i,f=n.u,i=n.l,a=[],u=e[Symbol.iterator](),l=u.next(),c=f,s=0,p=!1,y=function(){if(!p){var e=a.length+c;if(o)for(;!l.done&&a.length<e;)r(a,l.value,t),l=u.next();else for(;!l.done&&a.length<e;){if("\r"===l.value||"\n"===l.value){p=!0;break}r(a,l.value,t),l=u.next()}c=Math.max(f-s,i)}};this.p=function(){return!!p&&("\r"===l.value&&(l=u.next()),"\n"===l.value&&(l=u.next()),s+=a.length,a.length=0,p=!1,!0)},this.v=function(e){if(e<0)return!1;for(;;){if(e<a.length-1)return!0;if(l.done||p)return e<a.length;y()}},this.m=function(e){if(e<0)return"";for(;;){if(e<a.length-1)return a[e];if(l.done||p)return e<a.length?a[e]:"";y()}},this.h=function(e,n){if(n<=0||n<=e)return[];for(;;){if(n<=a.length-1)return a.slice(e,n);if(l.done||p)return a.slice(e,n);y()}}}var r,t=document.createElement("canvas").getContext("2d"),o=Number.POSITIVE_INFINITY,f=function(e,n,r){r&&/\s/.test(n)?" "!==e[e.length-1]&&e.push(" "):e.push(n)},i=function(e,n,r){return!!/[\s-]/.test(e.m(n))||!(!r||!/\s/.test(e.m(n+1)))},a=function(e){for(var n="",o=0;o<e.length;o++){var f=e[o];n+="\t"===f?r:f}return t.measureText(n).width},u=function(e,n,r,t){for(;n.v(r+e.length)&&a(e)<t;)e.push(n.m(r+e.length));if(0===e.length)e.push(n.m(r));else for(;e.length>1&&a(e)>t;)e.length-=1},l=function(e,n,r){for(;e.length>0&&a(e.concat(n))>r;)e.length-=1;e.push(n)},c=function(e,n){void 0===n&&(n={}),"string"==typeof n.font?e._=n.font:e._="10px sans-serif",["auto","normal","none"].includes(n.fontKerning)?e.g=n.fontKerning:e.g="auto","number"==typeof n.tabSize?e.S=n.tabSize:e.S=8};e.measureText=function(e,n){var r={};c(r,n),t.font=r._,t.fontKerning=r.g;var o=new Array(r.S).fill(" ").join("");return t.measureText(e.replace(/\t/g,o))},e.wrapText=function(e,s){var p={};c(p,s),function(e,n){void 0===n&&(n={}),"number"==typeof n.maxWidth?e.k=n.maxWidth:e.k=o,"number"==typeof n.maxLines?e.F=n.maxLines:e.F=o,"number"==typeof n.indent?e.M=n.indent:e.M=0,"number"==typeof n.lastIndent?e.j=n.lastIndent:e.j=0,"string"==typeof n.etc?e.C=n.etc:e.C="â€¦",["collapse","preserve"].includes(n.newlines)?e.L=n.newlines:e.L="collapse",["collapse","trim","preserve"].includes(n.inlineSpaces)?e.O=n.inlineSpaces:e.O="collapse"}(p,s),t.font=p._,t.fontKerning=p.g,r=new Array(p.S).fill(" ").join("");var y=function(e,r){var t=r.t,f=r.T,i=r.A,a=r.N,u=r.B,l=r.k,c=r.F,s=r.M,p=r.j,y=r.C,b=r.L,v=r.O;if(c<=0)return[];for(var d="collapse"===v||"trim"===v,m=0,h=0,_=function(e){return 0===h?Math.ceil(e/u):Math.ceil(e/(m/h))},g=[],S=new n(e,{t:t,o:"collapse"===v,i:"collapse"===b,u:c===o?o:Math.max(1,Math.floor(1.2*c*_(l))),l:Math.max(1,2*_(l))}),k=!1,F=g.length,M=0;;){var x=S.m(M);if(d)for(;/\s/.test(x);)M++,x=S.m(M);if(""===x){if(F===g.length){if(g.length===c){k=!0;break}g.push([])}if(S.p()){M=0,F=g.length;continue}break}if(g.length===c){k=!0;break}var w=0===g.length?l-s:g.length===c-1?l-p:l,j=S.h(M,M+_(w)+1);if(i(j,S,M,w),m+=w,h+=j.length,S.v(M+j.length)){for(var C=-1,L=j.length-1;L>=0;L--)if(f(S,M+L,d)){C=L;break}C>-1&&C<j.length-1&&j.splice(C+1)}if(M+=j.length,d)for(;j.length>0&&/\s/.test(j[j.length-1]);)j.length-=1;g.push(j)}return k&&a(g[g.length-1],y,l-p),g}(e,Object.assign(p,{t:f,T:i,A:u,N:l,B:a(["a"])}));return{lines:y,font:t.font}},Object.defineProperty(e,"__esModule",{value:!0})},"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory((global="undefined"!=typeof globalThis?globalThis:global||self).WrapText_base={});
