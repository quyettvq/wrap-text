!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.WrapText_base=t():e.WrapText_base=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var l in n)e.o(n,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:n[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e,t={}){const{charLoaderFn:n,collapsesSpaces:l,collapsesNewlines:o,initialChunkSize:i,supplementalChunkSize:r}=t,s=[],a=e[Symbol.iterator]();let f=a.next(),c=i,h=0,u=!1;const g=()=>{if(u)return;const e=s.length+c;if(o)for(;!f.done&&s.length<e;)n(s,f.value,l),f=a.next();else for(;!f.done&&s.length<e;){if("\r"===f.value||"\n"===f.value){u=!0;break}n(s,f.value,l),f=a.next()}c=Math.max(i-h,r)};this.enterNextSection=()=>!!u&&("\r"===f.value&&(f=a.next()),"\n"===f.value&&(f=a.next()),h+=s.length,s.length=0,u=!1,!0),this.has=e=>{for(;;){if(e<s.length-1)return!0;if(f.done||u)return e<s.length;g()}},this.get=e=>{for(;;){if(e<s.length-1)return s[e];if(f.done||u)return e<s.length?s[e]:"";g()}},this.slice=(e,t)=>{for(;;){if(t<=s.length-1)return s.slice(e,t);if(f.done||u)return s.slice(e,t);g()}}}e.r(t),e.d(t,{measureText:()=>p,wrapText:()=>d});const l=document.createElement("canvas").getContext("2d"),o=Number.POSITIVE_INFINITY,i="10px sans-serif",r="normal",s=8;function a(e,t,n){n&&/\s/.test(t)?" "!==e[e.length-1]&&e.push(" "):e.push(t)}function f(e,t,n){return!!/[\s-]/.test(e.get(t))||!(!n||!/\s/.test(e.get(t+1)))}let c;function h(e){let t="";for(let n=0;n<e.length;n++){const l=e[n];t+="\t"===l?c:l}return l.measureText(t).width}function u(e,t,n,l){for(;t.has(n+e.length)&&h(e)<l;)e.push(t.get(n+e.length));for(;e.length>0&&h(e)>l;)e.length-=1}function g(e,t,n){for(;e.length>0&&h(e.concat(t))>n;)e.length-=1;e.push(t)}function p(e,t={}){const{font:n=i,fontKerning:o=r,tabSize:a=s}=t;l.font=n,l.fontKerning=o;const f=new Array(a).fill(" ").join("");return l.measureText(e.replace(/\t/g,f))}function d(e,t={}){const{font:p=i,fontKerning:d=r,tabSize:b=s}=t;l.font=p,l.fontKerning=d,c=new Array(b).fill(" ").join("");const x=function(e,t={}){const{charLoaderFn:l,lineBreakOpportunityTestFn:i,lineFittingFn:r,etcLineFittingFn:s,typicalCharWidth:a,maxWidth:f=o,maxLines:c=o,etc:h="â€¦",indent:u=0,lastIndent:g=0,newlines:p="collapse",inlineSpaces:d="collapse"}=t;if(isNaN(f)||f<=0||isNaN(c)||c<=0)return[];const b="collapse"===d||"trim"===d;let x=0,m=0;const y=e=>0===m?Math.ceil(e/a):Math.ceil(e/(x/m)),S=[],F=new n(e,{charLoaderFn:l,collapsesSpaces:"collapse"===d,collapsesNewlines:"collapse"===p,initialChunkSize:c===o?o:Math.floor(1.2*c*y(f)),supplementalChunkSize:2*y(f)});let T=!1,k=S.length,v=0;for(;;){let e=F.get(v);if(b)for(;/\s/.test(e);)v++,e=F.get(v);if(""===e){if(k===S.length){if(S.length===c){T=!0;break}S.push([])}if(F.enterNextSection()){v=0,k=S.length;continue}break}if(S.length===c){T=!0;break}const t=0===S.length?f-u:S.length===c-1?f-g:f,n=F.slice(v,v+y(t)+1);if(r(n,F,v,t),x+=t,m+=n.length,F.has(v+n.length)){let e=-1;for(let t=n.length-1;t>=0;t--)if(i(F,v+t,b)){e=t;break}e>-1&&e<n.length-1&&n.splice(e+1)}if(v+=n.length,b)for(;n.length>0&&/\s/.test(n[n.length-1]);)n.length-=1;S.push(n)}return T&&s(S[S.length-1],h,f-g),S}(e,{charLoaderFn:a,lineBreakOpportunityTestFn:f,lineFittingFn:u,etcLineFittingFn:g,typicalCharWidth:h(["a"]),...t});return{lines:x,font:l.font}}return t})()));