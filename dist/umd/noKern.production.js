!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.WrapText_noKern=t():e.WrapText_noKern=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var l in n)e.o(n,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:n[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e,t={}){const{charLoaderFn:n,collapsesSpaces:l,collapsesNewlines:r,initialChunkSize:o,supplementalChunkSize:i}=t,s=[],a=e[Symbol.iterator]();let c=a.next(),f=o,h=0,u=!1;const p=()=>{if(u)return;const e=s.length+f;if(r)for(;!c.done&&s.length<e;)n(s,c.value,l),c=a.next();else for(;!c.done&&s.length<e;){if("\r"===c.value||"\n"===c.value){u=!0;break}n(s,c.value,l),c=a.next()}f=Math.max(o-h,i)};this.enterNextSection=()=>!!u&&("\r"===c.value&&(c=a.next()),"\n"===c.value&&(c=a.next()),h+=s.length,s.length=0,u=!1,!0),this.has=e=>{for(;;){if(e<s.length-1)return!0;if(c.done||u)return e<s.length;p()}},this.get=e=>{for(;;){if(e<s.length-1)return s[e];if(c.done||u)return e<s.length?s[e]:"";p()}},this.slice=(e,t)=>{for(;;){if(t<=s.length-1)return s.slice(e,t);if(c.done||u)return s.slice(e,t);p()}}}e.r(t),e.d(t,{measureText:()=>f,wrapText:()=>h});const l=document.createElement("canvas").getContext("2d"),r=Number.POSITIVE_INFINITY,o="10px sans-serif",i="normal",s=8;function a(e,t,n){n&&/\s/.test(t)?" "!==e[e.length-1]&&e.push(" "):e.push(t)}function c(e,t,n){return!!/[\s-]/.test(e.get(t))||!(!n||!/\s/.test(e.get(t+1)))}function f(e,t={}){const{font:n=o,fontKerning:r=i,tabSize:a=s}=t;l.font=n,l.fontKerning=r;const c=new Array(a).fill(" ").join("");return l.measureText(e.replace(/\t/g,c))}function h(e,t={}){const{font:i=o,tabSize:f=s}=t;l.font=i;const h=Object.create(null),u=e=>{let t=h[e];return void 0===t&&(t="\t"===e?l.measureText(new Array(f).fill(" ").join("")).width:l.measureText(e).width,h[e]=t),t},p=e=>{let t=0;for(let n=e.length-1;n>=0;n--)t+=u(e[n]);return t},g=function(e,t={}){const{charLoaderFn:l,lineBreakOpportunityTestFn:o,lineFittingFn:i,etcLineFittingFn:s,typicalCharWidth:a,maxWidth:c=r,maxLines:f=r,etc:h="â€¦",indent:u=0,lastIndent:p=0,newlines:g="collapse",inlineSpaces:d="collapse"}=t;if(isNaN(c)||c<=0||isNaN(f)||f<=0)return[];const x="collapse"===d||"trim"===d;let m=0,b=0;const y=e=>0===b?Math.ceil(e/a):Math.ceil(e/(m/b)),S=[],F=new n(e,{charLoaderFn:l,collapsesSpaces:"collapse"===d,collapsesNewlines:"collapse"===g,initialChunkSize:f===r?r:Math.floor(1.2*f*y(c)),supplementalChunkSize:2*y(c)});let T=!1,v=S.length,k=0;for(;;){let e=F.get(k);if(x)for(;/\s/.test(e);)k++,e=F.get(k);if(""===e){if(v===S.length){if(S.length===f){T=!0;break}S.push([])}if(F.enterNextSection()){k=0,v=S.length;continue}break}if(S.length===f){T=!0;break}const t=0===S.length?c-u:S.length===f-1?c-p:c,n=F.slice(k,k+y(t)+1);if(i(n,F,k,t),m+=t,b+=n.length,F.has(k+n.length)){let e=-1;for(let t=n.length-1;t>=0;t--)if(o(F,k+t,x)){e=t;break}e>-1&&e<n.length-1&&n.splice(e+1)}if(k+=n.length,x)for(;n.length>0&&/\s/.test(n[n.length-1]);)n.length-=1;S.push(n)}return T&&s(S[S.length-1],h,c-p),S}(e,{charLoaderFn:a,lineBreakOpportunityTestFn:c,lineFittingFn:(e,t,n,l)=>{let r=p(e),o="";for(;r<l&&""!==(o=t.get(n+e.length));)e.push(o),r+=u(o);for(;r>l;){const t=e.pop();r-=u(t)}},etcLineFittingFn:(e,t,n)=>{const l=u(t);let r=p(e);for(;r+l>n;)r-=u(e.pop());e.push(t)},typicalCharWidth:u("a"),...t});return{lines:g,font:l.font}}return t})()));