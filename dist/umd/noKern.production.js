function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var global,factory;global=this,factory=function(e){function n(e,n){var r=n.t,t=n.o,o=n.i,f=n.u,i=n.l,a=[],u=e[Symbol.iterator](),l=u.next(),c=f,s=0,p=!1,y=function(){if(!p){var e=a.length+c;if(o)for(;!l.done&&a.length<e;)r(a,l.value,t),l=u.next();else for(;!l.done&&a.length<e;){if("\r"===l.value||"\n"===l.value){p=!0;break}r(a,l.value,t),l=u.next()}c=Math.max(f-s,i)}};this.p=function(){return!!p&&("\r"===l.value&&(l=u.next()),"\n"===l.value&&(l=u.next()),s+=a.length,a.length=0,p=!1,!0)},this.v=function(e){if(e<0)return!1;for(;;){if(e<a.length-1)return!0;if(l.done||p)return e<a.length;y()}},this.m=function(e){if(e<0)return"";for(;;){if(e<a.length-1)return a[e];if(l.done||p)return e<a.length?a[e]:"";y()}},this.h=function(e,n){if(n<=0||n<=e)return[];for(;;){if(n<=a.length-1)return a.slice(e,n);if(l.done||p)return a.slice(e,n);y()}}}var r=document.createElement("canvas").getContext("2d"),t=Number.POSITIVE_INFINITY,o=function(e,n,r){r&&/\s/.test(n)?" "!==e[e.length-1]&&e.push(" "):e.push(n)},f=function(e,n,r){return!!/[\s-]/.test(e.m(n))||!(!r||!/\s/.test(e.m(n+1)))},i=function(e,n){void 0===n&&(n={}),"string"==typeof n.font?e._=n.font:e._="10px sans-serif",["auto","normal","none"].includes(n.fontKerning)?e.g=n.fontKerning:e.g="auto","number"==typeof n.tabSize?e.S=n.tabSize:e.S=8};e.measureText=function(e,n){var t={};i(t,n),r.font=t._,r.fontKerning=t.g;var o=new Array(t.S).fill(" ").join("");return r.measureText(e.replace(/\t/g,o))},e.wrapText=function(e,a){var u={};i(u,a),function(e,n){void 0===n&&(n={}),"number"==typeof n.maxWidth?e.k=n.maxWidth:e.k=t,"number"==typeof n.maxLines?e.F=n.maxLines:e.F=t,"number"==typeof n.indent?e.M=n.indent:e.M=0,"number"==typeof n.lastIndent?e.j=n.lastIndent:e.j=0,"string"==typeof n.etc?e.O=n.etc:e.O="â€¦",["collapse","preserve"].includes(n.newlines)?e.C=n.newlines:e.C="collapse",["collapse","trim","preserve"].includes(n.inlineSpaces)?e.L=n.inlineSpaces:e.L="collapse"}(u,a),r.font=u._;var l=Object.create(null),c=function(e){var n=l[e];return void 0===n&&(n="\t"===e?r.measureText(new Array(u.S).fill(" ").join("")).width:r.measureText(e).width,l[e]=n),n},s=function(e){for(var n=0,r=e.length-1;r>=0;r--)n+=c(e[r]);return n},p=function(e,r){var o=r.t,f=r.T,i=r.A,a=r.N,u=r.B,l=r.k,c=r.F,s=r.M,p=r.j,y=r.O,b=r.C,v=r.L;if(c<=0)return[];for(var d="collapse"===v||"trim"===v,m=0,h=0,_=function(e){return 0===h?Math.ceil(e/u):Math.ceil(e/(m/h))},g=[],S=new n(e,{t:o,o:"collapse"===v,i:"collapse"===b,u:c===t?t:Math.max(1,Math.floor(1.2*c*_(l))),l:Math.max(1,2*_(l))}),k=!1,F=g.length,M=0;;){var x=S.m(M);if(d)for(;/\s/.test(x);)M++,x=S.m(M);if(""===x){if(F===g.length){if(g.length===c){k=!0;break}g.push([])}if(S.p()){M=0,F=g.length;continue}break}if(g.length===c){k=!0;break}var j=0===g.length?l-s:g.length===c-1?l-p:l,w=S.h(M,M+_(j)+1);if(i(w,S,M,j),m+=j,h+=w.length,S.v(M+w.length)){for(var O=-1,C=w.length-1;C>=0;C--)if(f(S,M+C,d)){O=C;break}O>-1&&O<w.length-1&&w.splice(O+1)}if(M+=w.length,d)for(;w.length>0&&/\s/.test(w[w.length-1]);)w.length-=1;g.push(w)}return k&&a(g[g.length-1],y,l-p),g}(e,Object.assign(u,{t:o,T:f,A:function(e,n,r,t){for(var o=s(e),f="";o<t&&""!==(f=n.m(r+e.length));)e.push(f),o+=c(f);if(0===e.length)e.push(n.m(r));else for(;o>t&&e.length>1;){var i=e.pop();o-=c(i)}},N:function(e,n,r){for(var t=c(n),o=s(e);o+t>r;)o-=c(e.pop());e.push(n)},B:c("a")}));return{lines:p,font:r.font}},Object.defineProperty(e,"__esModule",{value:!0})},"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory((global="undefined"!=typeof globalThis?globalThis:global||self).WrapText_noKern={});
