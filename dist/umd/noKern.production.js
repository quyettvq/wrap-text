!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.WrapText_noKern=t():e.WrapText_noKern=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e,t={}){const{charLoaderFn:n,collapsesSpaces:i,collapsesNewlines:r,initialChunkSize:l,supplementalChunkSize:o}=t,s=[],a=e[Symbol.iterator]();let f=a.next(),c=l,u=0,p=!1;const h=()=>{if(p)return;const e=s.length+c;if(r)for(;!f.done&&s.length<e;)n(s,f.value,i),f=a.next();else for(;!f.done&&s.length<e;){if("\r"===f.value||"\n"===f.value){p=!0;break}n(s,f.value,i),f=a.next()}c=Math.max(l-u,o)};this.enterNextSection=()=>!!p&&("\r"===f.value&&(f=a.next()),"\n"===f.value&&(f=a.next()),u+=s.length,s.length=0,p=!1,!0),this.has=e=>{if(e<0)return!1;for(;;){if(e<s.length-1)return!0;if(f.done||p)return e<s.length;h()}},this.get=e=>{if(e<0)return"";for(;;){if(e<s.length-1)return s[e];if(f.done||p)return e<s.length?s[e]:"";h()}},this.slice=(e,t)=>{if(t<=0||t<=e)return[];for(;;){if(t<=s.length-1)return s.slice(e,t);if(f.done||p)return s.slice(e,t);h()}}}e.r(t),e.d(t,{measureText:()=>s,wrapText:()=>a});const i=document.createElement("canvas").getContext("2d"),r=Number.POSITIVE_INFINITY;function l(e,t,n){n&&/\s/.test(t)?" "!==e[e.length-1]&&e.push(" "):e.push(t)}function o(e,t,n){return!!/[\s-]/.test(e.get(t))||!(!n||!/\s/.test(e.get(t+1)))}function s(e,t={}){normalizeTypographyOptions(t);const{font:n,fontKerning:r,tabSize:l}=t;i.font=n,i.fontKerning=r;const o=new Array(l).fill(" ").join("");return i.measureText(e.replace(/\t/g,o))}function a(e,t={}){!function(e){"string"!=typeof e.font&&(e.font="10px sans-serif"),["auto","normal","none"].includes(e.fontKerning)||(e.fontKerning="auto"),"number"!=typeof e.tabSize&&(e.tabSize=8)}(t),function(e){"number"!=typeof e.maxWidth&&(e.maxWidth=r),"number"!=typeof e.maxLines&&(e.maxLines=r),"number"!=typeof e.indent&&(e.indent=0),"number"!=typeof e.lastIndent&&(e.lastIndent=0),"string"!=typeof e.etc&&(e.etc="â€¦"),["collapse","preserve"].includes(e.newlines)||(e.newlines="collapse"),["collapse","trim","preserve"].includes(e.inlineSpaces)||(e.inlineSpaces="collapse")}(t);const{font:s,tabSize:a}=t;i.font=s;const f=Object.create(null),c=e=>{let t=f[e];return void 0===t&&(t="\t"===e?i.measureText(new Array(a).fill(" ").join("")).width:i.measureText(e).width,f[e]=t),t},u=e=>{let t=0;for(let n=e.length-1;n>=0;n--)t+=c(e[n]);return t},p=function(e,t={}){let{charLoaderFn:i,lineBreakOpportunityTestFn:l,lineFittingFn:o,etcLineFittingFn:s,typicalCharWidth:a,maxWidth:f,maxLines:c,indent:u,lastIndent:p,etc:h,newlines:g,inlineSpaces:d}=t;if(c<=0)return[];const m="collapse"===d||"trim"===d;let x=0,y=0;const b=e=>0===y?Math.ceil(e/a):Math.ceil(e/(x/y)),S=[],F=new n(e,{charLoaderFn:i,collapsesSpaces:"collapse"===d,collapsesNewlines:"collapse"===g,initialChunkSize:c===r?r:Math.max(1,Math.floor(1.2*c*b(f))),supplementalChunkSize:Math.max(1,2*b(f))});let v=!1,T=S.length,w=0;for(;;){let e=F.get(w);if(m)for(;/\s/.test(e);)w++,e=F.get(w);if(""===e){if(T===S.length){if(S.length===c){v=!0;break}S.push([])}if(F.enterNextSection()){w=0,T=S.length;continue}break}if(S.length===c){v=!0;break}const t=0===S.length?f-u:S.length===c-1?f-p:f,n=F.slice(w,w+b(t)+1);if(o(n,F,w,t),x+=t,y+=n.length,F.has(w+n.length)){let e=-1;for(let t=n.length-1;t>=0;t--)if(l(F,w+t,m)){e=t;break}e>-1&&e<n.length-1&&n.splice(e+1)}if(w+=n.length,m)for(;n.length>0&&/\s/.test(n[n.length-1]);)n.length-=1;S.push(n)}return v&&s(S[S.length-1],h,f-p),S}(e,{charLoaderFn:l,lineBreakOpportunityTestFn:o,lineFittingFn:(e,t,n,i)=>{let r=u(e),l="";for(;r<i&&""!==(l=t.get(n+e.length));)e.push(l),r+=c(l);if(0===e.length)e.push(t.get(n));else for(;r>i&&e.length>1;){const t=e.pop();r-=c(t)}},etcLineFittingFn:(e,t,n)=>{const i=c(t);let r=u(e);for(;r+i>n;)r-=c(e.pop());e.push(t)},typicalCharWidth:c("a"),...t});return{lines:p,font:i.font}}return t})()));