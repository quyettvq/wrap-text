function r(r,n){var e=n.t,t=n.i,i=n.o,o=n.u,f=n.l,a=[],u=r[Symbol.iterator](),s=u.next(),c=o,l=0,p=!1,v=function(){if(!p){var r=a.length+c;if(i)for(;!s.done&&a.length<r;)e(a,s.value,t),s=u.next();else for(;!s.done&&a.length<r;){if("\r"===s.value||"\n"===s.value){p=!0;break}e(a,s.value,t),s=u.next()}c=Math.max(o-l,f)}};this.p=function(){return!!p&&("\r"===s.value&&(s=u.next()),"\n"===s.value&&(s=u.next()),l+=a.length,a.length=0,p=!1,!0)};this.v=function(r){if(r<0)return!1;for(;;){if(r<a.length-1)return!0;if(s.done||p)return r<a.length;v()}},this.h=function(r){if(r<0)return"";for(;;){if(r<a.length-1)return a[r];if(s.done||p)return r<a.length?a[r]:"";v()}},this.m=function(r,n){if(n<=0||n<=r)return[];for(;;){if(n<=a.length-1)return a.slice(r,n);if(s.done||p)return a.slice(r,n);v()}}}Object.defineProperty(exports,"__esModule",{value:!0});var n=document.createElement("canvas").getContext("2d"),e=Number.POSITIVE_INFINITY,t=function(r,n,e){e&&/\s/.test(n)?" "!==r[r.length-1]&&r.push(" "):r.push(n)},i=function(r,n,e){return!!/[\s-]/.test(r.h(n))||!(!e||!/\s/.test(r.h(n+1)))},o=function(r,n){void 0===n&&(n={}),"string"==typeof n.font?r._=n.font:r._="10px sans-serif",["auto","normal","none"].includes(n.fontKerning)?r.k=n.fontKerning:r.k="auto","number"==typeof n.tabSize?r.F=n.tabSize:r.F=8};exports.measureText=function(r,e){var t={};o(t,e),n.font=t._,n.fontKerning=t.k;var i=new Array(t.F).fill(" ").join("");return n.measureText(r.replace(/\t/g,i))},exports.wrapText=function(f,a){var u={};o(u,a),function(r,n){void 0===n&&(n={}),"number"==typeof n.maxWidth?r.M=n.maxWidth:r.M=e,"number"==typeof n.maxLines?r.g=n.maxLines:r.g=e,"number"==typeof n.indent?r.O=n.indent:r.O=0,"number"==typeof n.lastIndent?r.S=n.lastIndent:r.S=0,"string"==typeof n.etc?r.j=n.etc:r.j="â€¦",["collapse","preserve"].includes(n.newlines)?r.C=n.newlines:r.C="collapse",["collapse","trim","preserve"].includes(n.inlineSpaces)?r.L=n.inlineSpaces:r.L="collapse"}(u,a),n.font=u._;var s=Object.create(null),c=function(r){var e=s[r];return void 0===e&&(e="\t"===r?n.measureText(new Array(u.F).fill(" ").join("")).width:n.measureText(r).width,s[r]=e),e},l=function(r){for(var n=0,e=r.length-1;e>=0;e--)n+=c(r[e]);return n},p=function(n,t){var i=t.t,o=t.A,f=t.N,a=t.B,u=t.T,s=t.M,c=t.g,l=t.O,p=t.S,v=t.j,h=t.C,b=t.L;if(c<=0)return[];for(var m="collapse"===b||"trim"===b,y=0,_=0,d=function(r){return 0===_?Math.ceil(r/u):Math.ceil(r/(y/_))},k=[],F=new r(n,{t:i,i:"collapse"===b,o:"collapse"===h,u:c===e?e:Math.max(1,Math.floor(1.2*c*d(s))),l:Math.max(1,2*d(s))}),M=!1,g=k.length,w=0;;){var x=F.h(w);if(m)for(;/\s/.test(x);)w++,x=F.h(w);if(""===x){if(g===k.length){if(k.length===c){M=!0;break}k.push([])}if(F.p()){w=0,g=k.length;continue}break}if(k.length===c){M=!0;break}var O=0===k.length?s-l:k.length===c-1?s-p:s,S=F.m(w,w+d(O)+1);if(f(S,F,w,O),y+=O,_+=S.length,F.v(w+S.length)){for(var j=-1,C=S.length-1;C>=0;C--)if(o(F,w+C,m)){j=C;break}j>-1&&j<S.length-1&&S.splice(j+1)}if(w+=S.length,m)for(;S.length>0&&/\s/.test(S[S.length-1]);)S.length-=1;k.push(S)}return M&&a(k[k.length-1],v,s-p),k}(f,Object.assign(u,{t:t,A:i,N:function(r,n,e,t){for(var i=l(r),o="";i<t&&""!==(o=n.h(e+r.length));)r.push(o),i+=c(o);if(0===r.length)r.push(n.h(e));else for(;i>t&&r.length>1;){var f=r.pop();i-=c(f)}},B:function(r,n,e){for(var t=c(n),i=l(r);i+t>e;)i-=c(r.pop());r.push(n)},T:c("a")}));return{lines:p,font:n.font}};
