function r(r,n){var e=n.t,t=n.i,i=n.o,o=n.u,f=n.l,a=[],u=r[Symbol.iterator](),s=u.next(),c=o,l=0,p=!1,v=function(){if(!p){var r=a.length+c;if(i)for(;!s.done&&a.length<r;)e(a,s.value,t),s=u.next();else for(;!s.done&&a.length<r;){if("\r"===s.value||"\n"===s.value){p=!0;break}e(a,s.value,t),s=u.next()}c=Math.max(o-l,f)}};this.p=function(){return!!p&&("\r"===s.value&&(s=u.next()),"\n"===s.value&&(s=u.next()),l+=a.length,a.length=0,p=!1,!0)};this.v=function(r){if(r<0)return!1;for(;;){if(r<a.length-1)return!0;if(s.done||p)return r<a.length;v()}},this.h=function(r){if(r<0)return"";for(;;){if(r<a.length-1)return a[r];if(s.done||p)return r<a.length?a[r]:"";v()}},this.m=function(r,n){if(n<=0||n<=r)return[];for(;;){if(n<=a.length-1)return a.slice(r,n);if(s.done||p)return a.slice(r,n);v()}}}Object.defineProperty(exports,"__esModule",{value:!0});var n,e=document.createElement("canvas").getContext("2d"),t=Number.POSITIVE_INFINITY,i=function(r,n,e){e&&/\s/.test(n)?" "!==r[r.length-1]&&r.push(" "):r.push(n)},o=function(r,n,e){return!!/[\s-]/.test(r.h(n))||!(!e||!/\s/.test(r.h(n+1)))},f=function(r){for(var t="",i=0;i<r.length;i++){var o=r[i];t+="\t"===o?n:o}return e.measureText(t).width},a=function(r,n,e,t){for(;n.v(e+r.length)&&f(r)<t;)r.push(n.h(e+r.length));if(0===r.length)r.push(n.h(e));else for(;r.length>1&&f(r)>t;)r.length-=1},u=function(r,n,e){for(;r.length>0&&f(r.concat(n))>e;)r.length-=1;r.push(n)},s=function(r,n){void 0===n&&(n={}),"string"==typeof n.font?r._=n.font:r._="10px sans-serif",["auto","normal","none"].includes(n.fontKerning)?r.k=n.fontKerning:r.k="auto","number"==typeof n.tabSize?r.F=n.tabSize:r.F=8};exports.measureText=function(r,n){var t={};s(t,n),e.font=t._,e.fontKerning=t.k;var i=new Array(t.F).fill(" ").join("");return e.measureText(r.replace(/\t/g,i))},exports.wrapText=function(c,l){var p={};s(p,l),function(r,n){void 0===n&&(n={}),"number"==typeof n.maxWidth?r.M=n.maxWidth:r.M=t,"number"==typeof n.maxLines?r.g=n.maxLines:r.g=t,"number"==typeof n.indent?r.S=n.indent:r.S=0,"number"==typeof n.lastIndent?r.C=n.lastIndent:r.C=0,"string"==typeof n.etc?r.L=n.etc:r.L="â€¦",["collapse","preserve"].includes(n.newlines)?r.O=n.newlines:r.O="collapse",["collapse","trim","preserve"].includes(n.inlineSpaces)?r.j=n.inlineSpaces:r.j="collapse"}(p,l),e.font=p._,e.fontKerning=p.k,n=new Array(p.F).fill(" ").join("");var v=function(n,e){var i=e.t,o=e.A,f=e.N,a=e.B,u=e.T,s=e.M,c=e.g,l=e.S,p=e.C,v=e.L,h=e.O,b=e.j;if(c<=0)return[];for(var m="collapse"===b||"trim"===b,y=0,_=0,d=function(r){return 0===_?Math.ceil(r/u):Math.ceil(r/(y/_))},k=[],F=new r(n,{t:i,i:"collapse"===b,o:"collapse"===h,u:c===t?t:Math.max(1,Math.floor(1.2*c*d(s))),l:Math.max(1,2*d(s))}),M=!1,g=k.length,w=0;;){var x=F.h(w);if(m)for(;/\s/.test(x);)w++,x=F.h(w);if(""===x){if(g===k.length){if(k.length===c){M=!0;break}k.push([])}if(F.p()){w=0,g=k.length;continue}break}if(k.length===c){M=!0;break}var S=0===k.length?s-l:k.length===c-1?s-p:s,C=F.m(w,w+d(S)+1);if(f(C,F,w,S),y+=S,_+=C.length,F.v(w+C.length)){for(var L=-1,O=C.length-1;O>=0;O--)if(o(F,w+O,m)){L=O;break}L>-1&&L<C.length-1&&C.splice(L+1)}if(w+=C.length,m)for(;C.length>0&&/\s/.test(C[C.length-1]);)C.length-=1;k.push(C)}return M&&a(k[k.length-1],v,s-p),k}(c,Object.assign(p,{t:i,A:o,N:a,B:u,T:f(["a"])}));return{lines:v,font:e.font}};
